# PharmaMax Deployment Guide

## Automatic Demo Data Loading

PharmaMax can automatically load synthetic demo data when deployed to production. This includes:
- 60 patient profiles with allergies, insurance, and medical conditions
- 223 prescription history entries with realistic scenarios
- 158 inventory items (NDC packages) with stock levels
- Edge cases: allergies, drug interactions, controlled substances, etc.

## Quick Deployment (Google Cloud Run)

### Prerequisites
1. Google Cloud SDK installed and authenticated
2. Docker installed locally
3. Environment variables configured

### Option 1: Using Deployment Script (Recommended)

```bash
# Set environment variables
export DATABASE_URL="postgresql://user:pass@host:5432/pharmamax"
export OPENAI_API_KEY="sk-..."
export GCLOUD_PROJECT_ID="your-project-id"

# Run deployment script
./deploy-gcloud.sh
```

The script will:
- Prompt for demo data auto-loading preference
- Build Docker image with synthetic data included
- Deploy to Cloud Run
- Display service URL

### Option 2: Manual Deployment

```bash
# 1. Build and deploy in one command
gcloud run deploy pharmamax \
  --source . \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars "DATABASE_URL=postgresql://...,OPENAI_API_KEY=sk-...,PUBLIC_AUTO_LOAD_DEMO_DATA=true" \
  --memory 1Gi \
  --cpu 1 \
  --min-instances 0 \
  --max-instances 10
```

## Environment Variables

Required:
- DATABASE_URL - PostgreSQL connection string
- OPENAI_API_KEY - OpenAI API key for SIG parsing

Optional:
- PUBLIC_AUTO_LOAD_DEMO_DATA="true" - Auto-load demo data (default: false)

## After Deployment

Visit your URL and demo data will load automatically!
- 60 patients
- 223 prescriptions
- 158 inventory items

Check browser console for: "âœ… Demo data auto-loaded successfully!"
